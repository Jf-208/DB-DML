CREATE database IF NOT exists GERENCIAMENTO_USUARIO;
USE GERENCIAMENTO_USUARIO;

CREATE TABLE USUARIO(
	ID INT PRIMARY KEY AUTO_INCREMENT,
    NOME VARCHAR(120) NOT NULL,
    EMAIL VARCHAR(120) NOT NULL UNIQUE,
    SENHA VARCHAR(255) default '123' 
    );
    
CREATE TABLE VEICULO(
	ID INT PRIMARY KEY auto_increment,
    MODELO VARCHAR(50) NOT NULL, 
    PLACA VARCHAR(50) NOT NULL UNIQUE,
    ANO_FABRICACAO YEAR(4),
    COR VARCHAR(45) NOT NULL
    );

ALTER TABLE VEICULO
ADD COLUMN COR VARCHAR(50);

-- DONT EXECUTE ------------------------
ALTER TABLE VEICULO 
ADD CONSTRAINT UQ_PLACA unique(PLACA);

-- DONT EXECUTE ------------------------
ALTER TABLE VEICULO
modify PLACA INT;

-- DONT EXECUTE ------------------------
ALTER TABLE VEICULO 
RENAME COLUMN COR TO COR_VEICULO;

-- CHANGE VERSOES ANTIGAS
ALTER TABLE VEICULO
CHANGE COR_VEICULO VARCHAR(100);
-----------------------------------




USE GERENCIAMENTO_USUARIO;


--------- DESCREVER TABELA:
DESC USUARIO;
SHOW TABLES;
DESC VEICULO;

ALTER TABLE VEICULO
ADD COLUMN USUARIO_ID INT;
ALTER TABLE VEICULO
ADD CONSTRAINT FK_USUARIO
FOREIGN KEY (USUARIO_ID)
REFERENCES USUARIO(ID)
ON DELETE CASCADE;


-- DML: MANIPULAÇÃO DE DADOS
-- INSERT 1ª Forma
INSERT INTO
	USUARIO(NOME, EMAIL, SENHA)
VALUES
	('João Felipe', 'jf.baruoliveira@email.com', '123@senha');

-- INSERT 2ª Forma
INSERT INTO
	USUARIO(NOME, EMAIL, SENHA)
VALUES
	('Bertinho', 'bertinho@email.com', '1234');

INSERT INTO USUARIO (NOME, EMAIL, SENHA)
VALUES
('CrisTiano 1', 'ronaldinho2@email.com', '123'),
('Kari 2', 'caritono@gmail.com', '123'),
('Batuninha 3', 'batata@email.com', '123'),
('Damata 4', 'capim@email.com', '123'),
('Infantini', 'crianca@email.com', '123');

INSERT INTO VEICULO (MODELO, PLACA, ANO_FABRICACAO, COR, USUARIO_ID)
VALUES
('Yaris', 'qpx-2030', 2015, 'Prata', 1),
('Punto', 'ghv-4851', 2019, 'Preto', 2),
('Celta', 'osk-5621', 2020, 'Vermelho', 3),

-- UPDATE 0
UPDATE USUARIO
SET NOME = 'Jf'
where id = 1

-- DELETE
DELETE FROM VEICULO 
WHERE ID = 1;

-- NÃO E PARA EXECUTAR
TRUNCATE TABLE VEICULOS; 


USE GERENCIAMENTO_USUARIO;


--------- DESCREVER TABELA:
DESC USUARIO;
SHOW TABLES;
DESC VEICULO;

ALTER TABLE VEICULO
ADD COLUMN USUARIO_ID INT;
ALTER TABLE VEICULO
ADD CONSTRAINT FK_USUARIO
FOREIGN KEY (USUARIO_ID)
REFERENCES USUARIO(ID)
ON DELETE CASCADE;


-- DML: MANIPULAÇÃO DE DADOS
-- INSERT 1ª Forma
INSERT INTO
	USUARIO(NOME, EMAIL, SENHA)
VALUES
	('João Felipe', 'jf.baruoliveira@email.com', '123@senha');

-- INSERT 2ª Forma
INSERT INTO
	USUARIO(NOME, EMAIL, SENHA)
VALUES
	('Bertinho', 'bertinho@email.com', '1234');

INSERT INTO USUARIO (NOME, EMAIL, SENHA)
VALUES
('CrisTiano 1', 'ronaldinho2@email.com', '123'),
('Kari 2', 'caritono@gmail.com', '123'),
('Batuninha 3', 'batata@email.com', '123'),
('Damata 4', 'capim@email.com', '123'),
('Infantini', 'crianca@email.com', '123');

INSERT INTO VEICULO (MODELO, PLACA, ANO_FABRICACAO, COR, USUARIO_ID)
VALUES
('Yaris', 'qpx-2030', 2015, 'Prata', 1),
('Punto', 'ghv-4851', 2019, 'Preto', 2),
('Celta', 'osk-5621', 2020, 'Vermelho', 3),

-- UPDATE 0
UPDATE USUARIO
SET NOME = 'Jf'
where id = 1

-- DELETE
DELETE FROM VEICULO 
WHERE ID = 1;

-- NÃO E PARA EXECUTAR
TRUNCATE TABLE VEICULOS; 


CREATE TABLE IF NOT EXISTS `mydb`.`Pessoa` (
  `id_usuario INT` INT NOT NULL,
  `NOME` VARCHAR(45) NOT NULL,
  `data_nascimento` DATE NOT NULL,
  `cpf` VARCHAR(14) NOT NULL,
  `genero` VARCHAR(45) NULL,
  `email` VARCHAR(255) NOT NULL,
  PRIMARY KEY (`id_usuario INT`))
ENGINE = InnoDB

CREATE TABLE IF NOT EXISTS `mydb`.`Veiculo` (
  `id_veiculo INT` INT NOT NULL,
  `fabricante` VARCHAR(45) NOT NULL,
  `modelo` VARCHAR(45) NOT NULL,
  `ano` YEAR(4) NOT NULL,
  `placa` VARCHAR(45) NOT NULL,
  `cor` VARCHAR(45) NOT NULL,
  `Pessoa_id_usuario INT` INT NOT NULL,
  PRIMARY KEY (`id_veiculo INT`),
  INDEX `fk_Veiculo_Pessoa_idx` (`Pessoa_id_usuario INT` ASC) VISIBLE,
  CONSTRAINT `fk_Veiculo_Pessoa`
    FOREIGN KEY (`Pessoa_id_usuario INT`)
    REFERENCES `mydb`.`Pessoa` (`id_usuario INT`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB