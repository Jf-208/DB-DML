File4
USE GERENCIAMENTO_USUARIO;
CREATE TABLE CONSUMO(
	ID INT PRIMARY KEY AUTO_INCREMENT,
    VALOR DECIMAL(10,2) NOT NULL, 
    TIPO BIT NOT NULL,
    DT_CONSUMO DATETIME default NOW(),
    ID_VEICULO INT 
); 

ALTER TABLE CONSUMO
ADD CONSTRAINT FK_VEICULO
FOREIGN KEY (ID_VEICULO)
references VEICULO(ID)
ON DELETE CASCADE;

 INSERT INTO CONSUMO
	(VALOR, TIPO, ID_VEICULO)
VALUES 
	(55, 0, 1),
    (150, 0, 1),
    (200, 1, 2),
    (300, 1, 2),
    (250, 0, 2),
    (180, 0, 3),
    (100, 0, 4),
    (150, 1, 4);
    
SELECT VALOR, DT_CONSUMO, TIPO, ID_VEICULO
FROM CONSUMO;

SELECT 
	VALOR,
    TIPO, 
    COUNT(ID_VEICULO) AS QUANTIDADE
    
FROM CONSUMO
group by ID_VEICULO
ORDER BY QUANTIDADE DESC
LIMIT 1;

SELECT
ID_VEICULO,
    SUM(VALOR)
FROM CONSUMO
WHERE ID_VEICULO = 2;

SELECT
	U.ID,
	U.NOME,
    V.MODELO,
	V.PLACA,
    V.COR
    C.VALOR,
    C.TIPO,
    count(U.NOME) AS QTD,
    SUM(C.VALOR) AS TOTAL_GASTO
FROM USUARIO U
JOIN VEICULO V
ON V.USUARIO_ID = U.ID
JOIN CONSUMO C 
ON C.ID_VEICULO = V.ID
group by U.NOME
HAVING TOTAL_GASTO BETWEEN 200 AND 300
order by TOTAL_GASTO DESC
LIMIT 1;


SELECT 
	ID_VEICULO,
    VALOR, 
    VALOR * 1.1 AS 'VALOR COM 10%'
FROM CONSUMO 


/* CHECK LIST DE COMANDOS DQL
WHERE
AND, OR E NOT
IS NULL 
IS NOT NULL
BETWEEN
LIKE
LIMIT
ORDER BY ASC E DESC
GROUP BY
COUNT
AVG
MIN
MAX
SUM
OPERADORES ARITMETICOS(+ - * / > < >= <= )
*/
    
-- DQL: SELECT
SELECT NOME FROM USUARIOS,
WHERE ID = 1;


-- select com duas colunas.
select nome, email
from usuario;

select
	modelo,
    placa, 
    ano_fabricacao,
    cor,
    id_usuario
from veiculo
where ANO_FABRICACAO between '2018' and '2020';

select
	nome, email
from usuario
where nome like 'C%';
File3
USE GERENCIAMENTO_USUARIO;


--------- DESCREVER TABELA:
DESC USUARIO;
SHOW TABLES;
DESC VEICULO;

ALTER TABLE VEICULO
ADD COLUMN USUARIO_ID INT;
ALTER TABLE VEICULO
ADD CONSTRAINT FK_USUARIO
FOREIGN KEY (USUARIO_ID)
REFERENCES USUARIO(ID)
ON DELETE CASCADE;


-- DML: MANIPULAÇÃO DE DADOS
-- INSERT 1ª Forma
INSERT INTO
	USUARIO(NOME, EMAIL, SENHA)
VALUES
	('João Felipe', 'jf.baruoliveira@email.com', '123@senha');

-- INSERT 2ª Forma
INSERT INTO
	USUARIO(NOME, EMAIL, SENHA)
VALUES
	('Bertinho', 'bertinho@email.com', '1234');

INSERT INTO USUARIO (NOME, EMAIL, SENHA) VALUES
('User1', 'u1@email.com', '123'),
('User2', 'u2@email.com', '123'),
('User3', 'u3@email.com', '123');


INSERT INTO 
		VEICULO (MODELO, PLACA, ANO_FABRICACAO, COR, USUARIO_ID)
VALUES
('opala', 'qpx-2030', 2015, 'Prata', 120),
('Punto', 'ghv-4851', 2019, 'Preto', 53),
('Celta', 'osk-5621', 2020, 'Vermelho', 121);

-- UPDATE 0
UPDATE USUARIO
SET NOME = 'Jf'
where id = 1

-- DELETE
DELETE FROM VEICULO
WHERE ID = 1

-- NÃO E PARA EXECUTAR
TRUNCATE TABLE VEICULOS; 

File2
CREATE database IF NOT exists GERENCIAMENTO_USUARIO;
USE GERENCIAMENTO_USUARIO;

CREATE TABLE USUARIO(
	ID INT PRIMARY KEY AUTO_INCREMENT,
    NOME VARCHAR(120) NOT NULL,
    EMAIL VARCHAR(120) NOT NULL UNIQUE,
    SENHA VARCHAR(255) default '123' 
    );
    
CREATE TABLE VEICULO(
	ID INT PRIMARY KEY auto_increment,
    MODELO VARCHAR(50) NOT NULL, 
    PLACA VARCHAR(50) NOT NULL UNIQUE,
    ANO_FABRICACAO YEAR(4),
    COR VARCHAR(45) NOT NULL
    );

ALTER TABLE VEICULO
ADD COLUMN COR VARCHAR(50);

-- DONT EXECUTE ------------------------
ALTER TABLE VEICULO 
ADD CONSTRAINT UQ_PLACA unique(PLACA);

-- DONT EXECUTE ------------------------
ALTER TABLE VEICULO
modify PLACA INT;

-- DONT EXECUTE ------------------------
ALTER TABLE VEICULO 
RENAME COLUMN COR TO COR_VEICULO;

-- CHANGE VERSOES ANTIGAS
ALTER TABLE VEICULO
CHANGE COR_VEICULO VARCHAR(100);
-----------------------------------


Diagrama
id_usuario INT, NOME, data_nascimento, cpf, genero, email
INSERT INTO `mydb`.`Pessoa` (`id_usuario INT`, `NOME`, `data_nascimento`, `cpf`, `genero`, `email`) VALUES (NULL, NULL, NULL, NULL, NULL, NULL);
id_veiculo INT, fabricante, modelo, ano, placa, cor, Pessoa_id_usuario INT
INSERT INTO `mydb`.`Veiculo` (`id_veiculo INT`, `fabricante`, `modelo`, `ano`, `placa`, `cor`, `Pessoa_id_usuario INT`) VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL);
idCONSUMO, VALOR DECIMAL, TIPO.BIT, DT_CONSUMO, Veiculo_id_veiculo INT
INSERT INTO `mydb`.`CONSUMO` (`idCONSUMO`, `VALOR DECIMAL`, `TIPO.BIT`, `DT_CONSUMO`, `Veiculo_id_veiculo INT`) VALUES (NULL, NULL, NULL, NULL, NULL);





